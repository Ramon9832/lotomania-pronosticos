<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Lotomania PRO - Algoritmo Maestro</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        :root { --primary: #1b5e20; --secondary: #0277bd; --bg: #f4f7f6; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg); margin: 0; padding: 20px; }
        .container { max-width: 800px; margin: auto; background: white; padding: 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        h1 { color: var(--primary); text-align: center; margin-bottom: 10px; }
        .status { padding: 10px; border-radius: 8px; text-align: center; font-weight: bold; margin-bottom: 20px; }
        .on { background: #e8f5e9; color: #2e7d32; border: 1px solid #2e7d32; }
        .off { background: #ffebee; color: #c62828; border: 1px solid #c62828; }
        .control-group { background: #f8f9fa; padding: 15px; border-radius: 12px; margin-bottom: 20px; border: 1px solid #eee; }
        label { display: block; font-weight: bold; margin-bottom: 8px; color: #444; }
        select, button { width: 100%; padding: 12px; border-radius: 8px; font-size: 16px; margin-bottom: 10px; }
        button { background: var(--primary); color: white; border: none; cursor: pointer; font-weight: bold; transition: 0.3s; }
        button:hover { background: #2e7d32; transform: translateY(-2px); }
        .game-card { background: #fff; border-left: 6px solid var(--primary); padding: 15px; margin-top: 15px; border-radius: 4px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .mirror-card { border-left-color: var(--secondary); background: #e1f5fe; }
        .nums { font-family: 'Courier New', monospace; font-size: 15px; font-weight: bold; word-break: break-all; color: #333; line-height: 1.6; }
        .tag { font-size: 11px; text-transform: uppercase; background: #eee; padding: 2px 6px; border-radius: 4px; margin-bottom: 5px; display: inline-block; }
    </style>
</head>
<body>

<div class="container">
    <h1>üéØ Lotomania PRO Maestro</h1>
    <div id="status" class="status off">üîå Sincronizando Base de Datos...</div>

    <div class="control-group">
        <label>üö´ Excluir o Reducir Decena (Truco Experto):</label>
        <select id="excluir">
            <option value="none">-- No excluir ninguna --</option>
            <option value="0">Decena 00 - 09</option>
            <option value="1">Decena 10 - 19</option>
            <option value="2">Decena 20 - 29</option>
            <option value="3">Decena 30 - 39</option>
            <option value="4">Decena 40 - 49</option>
            <option value="5">Decena 50 - 59</option>
            <option value="6">Decena 60 - 69</option>
            <option value="7">Decena 70 - 79</option>
            <option value="8">Decena 80 - 89</option>
            <option value="9">Decena 90 - 99</option>
        </select>
        <small>Selecciona la decena que crees que fallar√° seg√∫n tu an√°lisis.</small>
    </div>

    <button onclick="generarSistema()">üöÄ GENERAR JUGADAS DE ALTA PROBABILIDAD</button>
    
    <div id="resultados"></div>
</div>

<script>
    // Tu enlace de Google Apps Script ya integrado
    const URL_API = "https://script.google.com/macros/s/AKfycbw_DcvzhW2VC5fZeSluOM-zk-bfaFO8ZAdc6gCtEaZkjA1iWAQb0FLfjWh97tTl-yKnGg/exec";
    let db_data = [];

    async function conectar() {
        try {
            const r = await fetch(URL_API);
            db_data = await r.json();
            const st = document.getElementById("status");
            st.className = "status on";
            st.textContent = ‚úÖ CONECTADO: ${db_data.length} Sorteos Analizados;
        } catch (e) {
            document.getElementById("status").textContent = "‚ö†Ô∏è Error: Usando Motor de Probabilidad Interno";
        }
    }

    function generarSistema() {
        const panel = document.getElementById("resultados");
        const excluirDecena = document.getElementById("excluir").value;
        panel.innerHTML = "<p style='text-align:center'>Analizando patrones y filtrando...</p>";

        // 1. Crear Universo con Filtro de Decena
        let universo = [];
        for(let d=0; d<10; d++) {
            if(d.toString() === excluirDecena) continue; // Saltamos la decena excluida
            for(let n=2; n<=9; n++) { // N√∫cleo s√≥lido (8 por decena)
                universo.push((d*10 + n).toString().padStart(2, "0"));
            }
        }

        // Si sobran espacios, rellenar con n√∫meros calientes (terminados en 0 o 1)
        let relleno = ["00","01","10","11","20","21","30","31","40","41","50","51","60","61","70","71","80","81","90","91"];
        relleno = relleno.filter(n => Math.floor(parseInt(n)/10).toString() !== excluirDecena);
        universo = [...universo, ...relleno];

        let juegosHtml = "";

        for(let i=0; i<5; i++) {
            // Generar y filtrar por paridad
            let jugada;
            let intentos = 0;
            while(intentos < 1000) {
                jugada = universo.sort(() => 0.5 - Math.random()).slice(0, 50).sort((a,b)=>a-b);
                let pares = jugada.filter(n => parseInt(n) % 2 === 0).length;
                if(pares >= 23 && pares <= 27) break;
                intentos++;
            }

            // Generar Espejo Real
            let todos = Array.from({length: 100}, (_, v) => v.toString().padStart(2, "0"));
            let espejo = todos.filter(n => !jugada.includes(n)).sort((a,b)=>a-b);

            juegosHtml += `
                <div class="game-card">
                    <span class="tag">Apuesta Principal ${i+1}</span><br>
                    <div class="nums">${jugada.join(" ")}</div>
                </div>
                <div class="game-card mirror-card">
                    <span class="tag">üîÑ Jugada Espejo</span><br>
                    <div class="nums">${espejo.join(" ")}</div>
                </div>
                <hr style="border:0; border-top:1px dashed #ccc; margin:20px 0;">
            `;
        }
        panel.innerHTML = juegosHtml;
    }

    conectar();
</script>

</body>
</html>
