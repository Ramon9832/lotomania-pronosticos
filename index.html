<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>LotomanÃ­a â€“ PronÃ³stico AutomÃ¡tico</title>

<style>
body{font-family:Arial;background:#f4f6f8;padding:20px}
h1,h2{text-align:center}
table{width:100%;border-collapse:collapse;background:#fff}
th,td{border:1px solid #ccc;padding:6px;text-align:center}
th{background:#1976d2;color:white}
#pronostico{
  margin-top:20px;
  background:#fff;
  padding:15px;
  font-size:18px;
  text-align:center;
  border-radius:8px;
}
button{
  padding:10px 20px;
  font-size:16px;
  margin:10px auto;
  display:block;
  cursor:pointer;
}
</style>
</head>

<body>

<h1>ðŸ“Š LotomanÃ­a â€“ PronÃ³stico AutomÃ¡tico</h1>

<h2>ðŸŽ¯ NÃºmeros sugeridos</h2>
<div id="pronostico">Cargando...</div>
<button onclick="generar()">ðŸ”„ Generar nuevo pronÃ³stico</button>

<script>
const sheetId = "1_BTD-7Y4MZpoe9Ttx8i1B-GjfgBiy1USOV9N9rhpEIA";
const url = https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:json;

let frecuencia = {};

fetch(url)
.then(r=>r.text())
.then(t=>{
  const json = JSON.parse(t.substring(47).slice(0,-2));
  json.table.rows.forEach(r=>{
    if(r.c[2] && r.c[2].v){
      r.c[2].v.split(" ").forEach(n=>{
        frecuencia[n]=(frecuencia[n]||0)+1;
      });
    }
  });
  generar();
});

function generar(){
  const ordenados = Object.entries(frecuencia)
    .sort((a,b)=>b[1]-a[1])
    .map(x=>x[0]);

  let seleccion = [];
  while(seleccion.length<50 && ordenados.length){
    const i = Math.floor(Math.random()*Math.min(ordenados.length,70));
    const n = ordenados[i];
    if(!seleccion.includes(n)) seleccion.push(n);
  }

  document.getElementById("pronostico").innerText =
    seleccion.sort().join(" ");
}
</script>

</body>
</html>
