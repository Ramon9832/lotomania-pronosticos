<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Lotomania – Pronóstico Inteligente</title>
<style>
body{font-family:Arial;margin:20px}
button{padding:10px;margin:5px}
.jugada{margin:5px 0}
.numero{display:inline-block;width:30px}
</style>
</head>

<body>

<h1>Lotomania – Pronóstico Automático</h1>

<p><strong>Último sorteo:</strong> <span id="ultimo"></span></p>

<label>Cuántas jugadas (1–20):</label>
<input type="number" id="cantidad" min="1" max="20" value="5">
<button onclick="generar()">Generar jugadas</button>

<h2>Jugadas</h2>
<div id="resultado"></div>

<script>
const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQ5zTmvIQ_c4bX9ADf1JzSKvivksl2Mkejdu9cvwrSwjvqB1_f2xSBudShflElF0CBMsJ260c_Beodx/pub?output=csv";

let numerosGlobal = [];

fetch(CSV_URL)
.then(r => r.text())
.then(texto => {
    const filas = texto.trim().split("\n").slice(1);
    const todos = [];

    filas.forEach(f => {
        const c = f.split(",");
        const nums = c[2].replace(/"/g,"").split(" ");
        nums.forEach(n => todos.push(n.padStart(2,"0")));
    });

    numerosGlobal = todos;

    const ultima = filas[0].split(",");
    document.getElementById("ultimo").innerText =
        Sorteo ${ultima[0]} – ${ultima[1]};
});

function generar(){
    const cantidad = parseInt(document.getElementById("cantidad").value);
    const res = document.getElementById("resultado");
    res.innerHTML = "";

    if(numerosGlobal.length === 0){
        res.innerHTML = "❌ Datos no cargados";
        return;
    }

    const freq = {};
    numerosGlobal.forEach(n => freq[n]=(freq[n]||0)+1);

    const top50 = Object.entries(freq)
